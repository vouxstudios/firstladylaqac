function createBricksTextControl(e,t){try{const{TextControl:o}=window.wp.components,{createElement:a}=window.wp.element;return a(o,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:e.id,label:e.label,value:t.attributes[e.id]||"",placeholder:e.placeholder||e.default,onChange:function(o){try{const a={};a[e.id]=o,t.setAttributes(a)}catch(e){}}})}catch(e){return null}}function createBricksRichTextControl(e,t){const{createElement:o}=window.wp.element,a=`bricks-gutenberg-editor-${e.id}-${Math.random().toString(36).substr(2,9)}`;return o("div",{key:e.id,style:{marginBottom:"16px"}},[o("label",{key:"label",style:{display:"block",marginBottom:"8px",fontSize:"11px",fontWeight:"500",color:"#1e1e1e"}},e.label),o(TinyMCEEditor,{key:"tinymce-editor",editorId:a,value:t.attributes[e.id]||"",onChange:function(o){const a={};a[e.id]=o,t.setAttributes(a)}})])}function TinyMCEEditor({editorId:e,value:t,onChange:o}){const{createElement:a,useEffect:i,useRef:n,useState:r}=window.wp.element,l=n(null),s=n(o),[c,d]=r(!1);i(()=>{s.current=o},[o]),i(()=>{if(l.current&&!c){if(window.tinyMCEPreInit&&window.tinymce&&window.switchEditors)return p(),d(!0),()=>{u()};console.warn("TinyMCE not available, falling back to textarea")}},[]),i(()=>{if(c&&window.tinymce){const o=window.tinymce.get(e),a=document.getElementById(e);o&&o.getContent()!==t&&o.setContent(t||""),a&&a.value!==t&&(a.value=t||"")}},[t,c]);const p=()=>{try{const o=`\n\t\t\t\t<div class="wp-core-ui wp-editor-wrap tmce-active" style="border: none;">\n\t\t\t\t\t<div class="wp-editor-tools">\n\t\t\t\t\t\t<div class="wp-editor-tabs">\n\t\t\t\t\t\t\t<button type="button" class="wp-switch-editor switch-tmce" data-wp-editor-id="${e}">${window.bricksData.i18n.visual}</button>\n\t\t\t\t\t\t\t<button type="button" class="wp-switch-editor switch-html" data-wp-editor-id="${e}">${window.bricksData.i18n.text}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="wp-editor-container">\n\t\t\t\t\t\t<textarea class="wp-editor-area" rows="10" cols="40" name="${e}" id="${e}">${t||""}</textarea>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;l.current.innerHTML=o;let a={};a=window.tinyMCEPreInit&&window.tinyMCEPreInit.mceInit&&window.tinyMCEPreInit.mceInit.brickswpeditor?window.jQuery?window.jQuery.extend(!0,{},window.tinyMCEPreInit.mceInit.brickswpeditor):Object.assign({},window.tinyMCEPreInit.mceInit.brickswpeditor):{theme:"modern",skin:"lightgray",plugins:"charmap,colorpicker,hr,lists,paste,tabfocus,textcolor,fullscreen,wordpress,wpeditimage,wpgallery,wplink,wpdialogs,wpview",toolbar1:"bold,italic,strikethrough,bullist,numlist,blockquote,hr,alignleft,aligncenter,alignright,link,unlink,wp_more,spellchecker,fullscreen,wp_adv",toolbar2:"formatselect,underline,alignjustify,forecolor,pastetext,removeformat,charmap,outdent,indent,undo,redo,wp_help",wpautop:!0,indent:!1},a.selector=`#${e}`,a.menubar=!1,a.statusbar=!1,a.body_class=e,a.resize="vertical",a.height=300,a.toolbar1&&!a.toolbar1.includes("formatselect")&&(a.toolbar1="formatselect,"+a.toolbar1),a.toolbar2&&(a.wordpress_adv_hidden=!1),a.setup=o=>{o.on("change keyup undo redo",()=>{const e=o.getContent();e!==t&&s.current(e)}),o.on("blur",()=>{const e=o.getContent();e!==t&&s.current(e)}),o.on("init",()=>{const a=o.getContainer().querySelector(".mce-statusbar");a&&(a.style.display="none");const i=o.getContainer();i&&(i.style.border="none",i.style.display="block",i.style.visibility="visible");const n=o.getWin();if(n&&n.document){const e=n.document.createElement("style");e.innerHTML='\n\t\t\t\t\t\t\tbody {\n\t\t\t\t\t\t\t\tmargin: 8px !important;\n\t\t\t\t\t\t\t\tfont-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;\n\t\t\t\t\t\t\t\tfont-size: 13px;\n\t\t\t\t\t\t\t\tline-height: 1.4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t',n.document.head.appendChild(e)}const r=document.getElementById(e);if(t&&(o.setContent(t),r&&(r.value=t)),r&&(r.style.display="none",r.setAttribute("aria-hidden","true")),o.theme&&o.theme.panel){const e=o.getContainer().querySelector(".mce-toolbar:nth-child(2)");e&&(e.style.display="block")}setTimeout(()=>{const e=o.getContainer().querySelector(".mce-i-wp_adv");e&&e.click()},100)})},window.tinymce.init(a);const i=l.current.querySelectorAll(".wp-switch-editor"),n=document.getElementById(e);i.forEach(t=>{t.addEventListener("click",o=>{o.preventDefault();const a=t.classList.contains("switch-tmce")?"tmce":"html",r=window.tinymce.get(e);if(!r||!n)return;if("html"===a){const e=r.getContent();n.value=e}else{const e=n.value||"";r.setContent(e)}const s=r.getContainer();"html"===a?(n&&(n.style.display="block",n.style.width="100%",n.style.height="300px",n.style.padding="8px",n.style.border="1px solid #ddd",n.style.borderRadius="4px",n.style.fontFamily="Consolas, Monaco, monospace",n.style.fontSize="13px",n.style.resize="vertical",n.setAttribute("aria-hidden","false")),s&&(s.style.display="none"),i.forEach(e=>{e.classList.contains("switch-html")?e.classList.add("wp-switch-editor-active"):e.classList.remove("wp-switch-editor-active")}),l.current.querySelector(".wp-editor-wrap").classList.remove("tmce-active"),l.current.querySelector(".wp-editor-wrap").classList.add("html-active")):(n&&(n.style.display="none",n.setAttribute("aria-hidden","true")),s&&(s.style.display="block",s.style.visibility="visible"),i.forEach(e=>{e.classList.contains("switch-tmce")?e.classList.add("wp-switch-editor-active"):e.classList.remove("wp-switch-editor-active")}),l.current.querySelector(".wp-editor-wrap").classList.remove("html-active"),l.current.querySelector(".wp-editor-wrap").classList.add("tmce-active"))})}),n&&n.addEventListener("input",e=>{const o=e.target.value;o!==t&&s.current(o)})}catch(e){const{TextareaControl:i}=window.wp.components;return a(i,{key:property.id,label:property.label,value:t||"",onChange:o})}},u=()=>{if(window.tinymce){const t=window.tinymce.get(e);t&&t.remove()}};return a("div",{ref:l,style:{border:"none"}})}function createBricksSelectControl(e,t){try{const{useState:o,useEffect:a,useRef:i}=window.wp.element,n=!0===e.multiple,r=t.attributes[e.id]||(n?[]:""),l=e.hasOwnProperty("optionsAjax"),[s,c]=o({}),[d,p]=o(!1),u=processOptions(e.options),b=l?[...u,...processOptions(s)]:u,[w,y]=o(!1),[m,k]=o(""),g=i(null),x=async(t=!1)=>{if(l){p(!0);try{const o={...e.optionsAjax};m&&m.length>=3&&(o.search=m),t&&r&&(Array.isArray(r)&&r.length>0?o.include=r:Array.isArray(r)||""===r||(o.include=[r]));const a=new URLSearchParams;Object.keys(o).forEach(e=>{Array.isArray(o[e])?o[e].forEach(t=>a.append(`${e}[]`,t)):a.append(e,o[e])}),window.bricksData?.nonce&&a.append("nonce",window.bricksData.nonce);const i=await fetch(`${window.ajaxurl||"/wp-admin/admin-ajax.php"}?${a}`,{method:"GET",credentials:"same-origin"});if(i.ok){const e=await i.json();e.success&&e.data?c(e.data):c({})}}catch(e){console.error("AJAX search error:",e),c({})}finally{p(!1)}}};a(()=>{if(!l)return;const e=setTimeout(()=>{m&&m.length>=3?x(!1):m||x(!0)},500);return()=>clearTimeout(e)},[m,l]),a(()=>{l&&x(!0)},[l]),a(()=>{const e=e=>{g.current&&!g.current.contains(e.target)&&y(!1)};if(w)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[w]);const h=m?b.filter(e=>e.label.toLowerCase().includes(m.toLowerCase())):b,_=b.filter(e=>Array.isArray(r)?r.includes(e.value):r===e.value),f=_.length>0;return createDropdownInterface({property:e,currentValue:r,options:b,filteredOptions:h,selectedOptions:_,hasSelection:f,isDropdownOpen:w,setIsDropdownOpen:y,searchTerm:m,setSearchTerm:k,props:t,controlRef:g,isLoading:d})}catch(e){return createErrorDisplay()}}function processOptions(e){const t=[];return e?(Array.isArray(e)?e.forEach(e=>{void 0!==e.value&&void 0!==e.label&&t.push({label:e.label,value:e.value})}):"object"==typeof e&&Object.keys(e).forEach(o=>{o.includes("GroupTitle")||t.push({label:e[o],value:o})}),t):t}function createDropdownInterface({property:e,currentValue:t,options:o,filteredOptions:a,selectedOptions:i,hasSelection:n,isDropdownOpen:r,setIsDropdownOpen:l,searchTerm:s,setSearchTerm:c,props:d,controlRef:p,isLoading:u}){const{createElement:b}=window.wp.element,{BaseControl:w}=window.wp.components,y=b("div",{key:"bricks-select-control",ref:p,style:{position:"relative"},"data-control":"select"},[...createSelectionTrigger(i,n,r,l,e,()=>{const t=!0===e.multiple,o={};o[e.id]=t?[]:void 0,d.setAttributes(o)}),r&&createDropdownPanel(o,a,t,s,c,(o,a)=>{const i=!0===e.multiple;let n;i?(n=Array.isArray(t)?[...t]:[],a?n=n.filter(e=>e!==o):n.includes(o)||n.push(o)):(n=a?"":o,l(!1));const r={};r[e.id]=i&&Array.isArray(n)?n.length>0?n:[]:n||void 0,d.setAttributes(r)},l,e,u)].filter(Boolean));return b(w,{key:e.id,label:e.label,help:e.help||"",__nextHasNoMarginBottom:!0},y)}function createSelectionTrigger(e,t,o,a,i,n){const r=!0===i.multiple,{createElement:l}=window.wp.element,{Button:s}=window.wp.components,c=t?r?l("div",{key:"selected-items",style:{display:"flex",flexWrap:"wrap",gap:"4px"}},e.map((e,t)=>l("span",{key:`selected-${e.value}-${t}`,style:{backgroundColor:"#0073aa",color:"#fff",padding:"2px 6px",borderRadius:"2px",fontSize:"11px",display:"inline-block"}},e.label))):l("span",{key:"selected-value",style:{color:"#000"}},e[0]?.label||""):l("span",{key:"placeholder",style:{color:"#757575"}},i.placeholder||window.bricksData.i18n.select),d=l("span",{key:"dropdown-arrow",style:{marginLeft:"8px",transform:o?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}},"▼"),p=t?l(s,{key:"clear-button",onClick:e=>{e.stopPropagation(),n()},variant:"secondary",size:"small",style:{position:"absolute",right:"30px",top:"50%",transform:"translateY(-50%)",minHeight:"24px",padding:"0 6px"}},"×"):null;return[l("div",{key:"selection-trigger",onClick:()=>a(!o),style:{border:"1px solid #949494",borderRadius:"2px",padding:"8px 12px",minHeight:"40px",cursor:"pointer",backgroundColor:"#fff",display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"13px",marginBottom:"8px"}},[l("div",{key:"selection-content",style:{flex:1}},c),d]),p].filter(Boolean)}function createDropdownPanel(e,t,o,a,i,n,r,l,s=!1){const{createElement:c}=window.wp.element,{TextControl:d}=window.wp.components,p=l.hasOwnProperty("optionsAjax")||!0===l.searchable||e.length>10?c("div",{key:"search-container",style:{padding:"8px",borderBottom:"1px solid #ddd"}},c(d,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"search-input",placeholder:window.bricksData.i18n.searchOptions,value:a,onChange:i,autoFocus:!0})):null,u=c("div",{key:"options-list",style:{maxHeight:"240px",overflowY:"auto"}},s?c("div",{key:"loading",style:{padding:"12px",textAlign:"center",color:"#757575",fontSize:"13px"}},window.bricksData.i18n.loading):t.length>0?t.map(e=>createOptionItem(e,o,n,l.multiple)):c("div",{key:"no-results",style:{padding:"12px",textAlign:"center",color:"#757575",fontSize:"13px"}},a&&a.length>0&&a.length<3?window.bricksData.i18n.typeToSearch:window.bricksData.i18n.noOptionsFound));return c("div",{key:"dropdown-panel",style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"#fff",border:"1px solid #949494",borderBottomLeftRadius:"2px",borderBottomRightRadius:"2px",boxShadow:"0 6px 12px rgba(0, 0, 0, 0.25)",zIndex:1e3,maxHeight:"calc(40px * 13.5)",overflow:"hidden"}},[p,u])}function createOptionItem(e,t,o,a){const{createElement:i}=window.wp.element,n=Array.isArray(t)?t.includes(e.value):t===e.value,r={padding:"8px 12px",cursor:"pointer",backgroundColor:n?"#0073aa":"transparent",color:n?"#fff":"#000",display:"flex",alignItems:"center",fontSize:"13px",borderBottom:"1px solid #f0f0f0"};return i("div",{key:e.value,onClick:()=>o(e.value,n),style:r,onMouseEnter:e=>{n||(e.target.style.backgroundColor="#f0f0f0")},onMouseLeave:e=>{n||(e.target.style.backgroundColor="transparent")}},[a&&i("input",{key:"checkbox",type:"checkbox",checked:n,onChange:()=>{},style:{marginRight:"8px"}}),i("span",{key:"label"},e.label)].filter(Boolean))}function createErrorDisplay(){const{createElement:e}=window.wp.element;return e("div",{style:{padding:"8px",border:"1px solid red",color:"red"}},window.bricksData.i18n.errorCouldNotLoadSelect)}function createBricksToggleControl(e,t){try{const{ButtonGroup:o,Button:a,BaseControl:i}=window.wp.components,{createElement:n}=window.wp.element;let r=e.options||{},l=Object.keys(r);0===l.length&&(r={true:window.bricksData.i18n.on,off:window.bricksData.i18n.off},l=Object.keys(r));let s=t.attributes[e.id],c=e.default;"boolean"==typeof s&&(s=s?"true":"off"),"boolean"==typeof c&&(c=c?"true":"off"),void 0===c&&(c="off");const d=function(o){try{const a={};if(s===o)a[e.id]=void 0;else{let t=o;"true"===o?t=!0:"off"===o&&(t="off"),a[e.id]=t}t.setAttributes(a)}catch(e){}},p="true"===s||!s&&"true"===c,u=n("div",{key:"toggle-switch",onClick:function(){d(p?"off":"true")},style:{position:"relative",width:"50px",height:"24px",backgroundColor:p?"#007cba":"#ccc",borderRadius:"12px",cursor:"pointer",transition:"background-color 0.3s ease",display:"inline-block"}},[n("div",{key:"toggle-circle",style:{position:"absolute",top:"2px",left:p?"28px":"2px",width:"20px",height:"20px",backgroundColor:"#fff",borderRadius:"50%",transition:"left 0.3s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}})]);return n(i,{key:e.id,label:e.label,help:e.help||"",__nextHasNoMarginBottom:!0},u)}catch(e){return createElement("div",{style:{padding:"8px",border:"1px solid red",color:"red"}},window.bricksData.i18n.errorCouldNotLoadToggle)}}function createBricksIconControl(e,t){try{const{SelectControl:o,TextControl:a,BaseControl:i,Button:n,Modal:r}=window.wp.components,{createElement:l,useState:s,useMemo:c,Fragment:d}=window.wp.element,p=window.bricksData||{},u=window.bricksGutenbergData||{},b=p.i18n||{},w=t.attributes[e.id]||{},y=w.library&&(w.icon||w.svg||w.dynamicData),[m,k]=s(""),[g,x]=s(!1),[h,_]=s(w.dynamicData||""),f=c(()=>{const e=window.FontAwesomeBrands||[],t=window.FontAwesomeRegular||[],o=window.FontAwesomeSolid||[],a=window.IoniconsClassNames||[],i=window.ThemifyClassNames||[],n={fontawesomeBrands:{},fontawesomeRegular:{},fontawesomeSolid:{},ionicons:{},themify:{}};return e.forEach(e=>{const t=`fab ${e}`;n.fontawesomeBrands[t]={html:`<i class="${t}"></i>`,title:t}}),t.forEach(e=>{const t=`far ${e}`;n.fontawesomeRegular[t]={html:`<i class="${t}"></i>`,title:t}}),o.forEach(e=>{const t=`fas ${e}`;n.fontawesomeSolid[t]={html:`<i class="${t}"></i>`,title:t}}),a.forEach(e=>{n.ionicons[e]={html:`<i class="${e}"></i>`,title:e}}),i.forEach(e=>{n.themify[e]={html:`<i class="${e}"></i>`,title:e}}),n},[]),v=()=>{const t=u.disabledIconSets||[];let o={};o[""]=b.selectIconSet||b.selectIconLibrary,"custom"!==e.libraries&&(o={...o,fontawesomeBrands:b.fontAwesomeBrands,fontawesomeRegular:b.fontAwesomeRegular,fontawesomeSolid:b.fontAwesomeSolid,ionicons:b.ionicons,themify:b.themify});const a=w.library;Object.keys(o).forEach(e=>{""!==e&&t.includes(e)&&e!==a&&delete o[e]}),Object.keys(o).length>1&&(o={"":o[""],builtInGroupTitle:b.builtInIconSets,...Object.fromEntries(Object.entries(o).filter(([e])=>""!==e))});let i={customGroupTitle:b.customIconSets};const n=u.iconSets||[],r=u.customIcons||[];return n.forEach(e=>{const o=`custom_${e.id}`;if(t.includes(e.id)&&o!==a)return;(r.some(t=>t.setId===e.id)||o===a)&&(i[o]=e.name)}),Object.keys(i).length>1&&(o={...o,...i}),"custom"!==e.libraries&&(o.iconSourceGroupTitle=b.iconSource,o.svg="SVG",o.dynamicData=b.dynamicData),o},D=()=>{let e={};if(w.library)if(w.library.startsWith("custom_")){const t=w.library.replace("custom_","");(u.customIcons||[]).filter(e=>e.setId===t).forEach(t=>{e[t.id]={html:`<img src="${t.url}" title="${t.name}" />`,title:t.name}})}else e=f[w.library]||{};else e=f.ionicons||{};return e},C=c(()=>{let e={...D()};const t=m?m.toLowerCase():"";return t&&Object.keys(e).forEach(o=>{(e[o]?.title||o).toLowerCase().includes(t)||delete e[o]}),e},[w.library,m]),S=o=>{const a={...w};o?(a.library=o,"svg"!==o&&"dynamicData"!==o&&(delete a.svg,delete a.dynamicData,delete a.icon),t.setAttributes({[e.id]:a}),k("")):t.setAttributes({[e.id]:{}})},B=o=>{const a={...w};if(w.library&&w.library.startsWith("custom_")){const e=(u.customIcons||[]).find(e=>e.id===o);e&&(a.svg={id:e.attachment_id,icon_id:e.id,url:e.url},delete a.icon)}else a.icon=o,delete a.svg;t.setAttributes({[e.id]:a}),x(!1)},T=o=>{_(o);const a={...w,dynamicData:o};t.setAttributes({[e.id]:a})},A=(o,a)=>{const i={...w};i.svg||(i.svg={}),i.svg[o]=a,t.setAttributes({[e.id]:i})},I=()=>{t.setAttributes({[e.id]:{}}),x(!1)},N=()=>w.icon&&w.icon.startsWith("icon_")&&w.library&&w.library.startsWith("custom_"),z=()=>{if(w.svg)return w.svg.url;if(N()){const e=w.icon,t=(u.customIcons||[]).find(t=>t.id===e);return t?t.url:""}return""},M=()=>{if(w.svg||N()){const e=z();if(e)return l("img",{src:e,alt:"",style:{maxWidth:"100%",maxHeight:"100%"}})}else{if("dynamicData"===w.library&&w.dynamicData)return l("div",{className:"dynamic-data-preview",dangerouslySetInnerHTML:{__html:w.dynamicData}});if(w.icon)return l("i",{className:w.icon})}return null},E=()=>{if(!w.library||!w.library.startsWith("custom_"))return{};const e=w.library.replace("custom_",""),t=(u.iconSets||[]).find(t=>t.id===e);return t?.backgroundColor?{backgroundColor:t.backgroundColor}:{}};return l(i,{key:e.id,label:e.label,help:e.help||b.selectAnIconLibrary,__nextHasNoMarginBottom:!0},[l("div",{key:"preview-wrapper",style:{marginBottom:"8px"}},l(n,{key:"preview-button",onClick:()=>x(!0),className:`bricks-control-preview ${y?"":"empty"} ${w.svg?"svg":""}`,style:{...E(),width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #ddd",borderRadius:"2px",fontSize:"24px",cursor:"pointer"}},y?M():l("span",{style:{color:"#999"}},"+"))),g&&l(r,{key:"icon-modal",title:b.selectIcon,onRequestClose:()=>x(!1),style:{maxWidth:"90%",width:"800px"}},[l("div",{key:"control-select-wrapper",style:{marginBottom:"16px"}},l(o,{key:"library",label:b.source,value:w.library||"",options:Object.keys(v()).map(e=>({label:v()[e],value:e,disabled:e.includes("GroupTitle")})),onChange:S})),w.library&&"svg"!==w.library&&"dynamicData"!==w.library&&l("div",{key:"icons-wrapper",style:{marginBottom:"16px"}},[l(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"search",label:b.searchFor,value:m,onChange:k,placeholder:b.searchFor,style:{marginBottom:"10px"}}),Object.keys(C).length>0?l("ul",{key:"icons-list",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(60px, 1fr))",gap:"10px",maxHeight:"400px",overflowY:"auto",padding:"10px",border:"1px solid #ddd",borderRadius:"2px",listStyle:"none",margin:0}},Object.keys(C).map(e=>{const t=C[e],o=e===w.icon||w.svg?.icon_id&&w.svg.icon_id===e;return l("li",{key:e,onClick:()=>B(e),className:o?"active":"",title:t?.title||e,style:{...E(),width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid "+(o?"#007cba":"#ddd"),borderRadius:"2px",cursor:"pointer",fontSize:"20px",transition:"border-color 0.2s ease"}},w.library?.startsWith("custom_")?l("div",{className:"custom-icon",style:E(),dangerouslySetInnerHTML:{__html:t.html}}):l("i",{className:e,title:t?.title||e}))})):l("div",{key:"no-icons",style:{padding:"20px",textAlign:"center",color:"#666"}},b.nothingFound)]),"dynamicData"===w.library&&l("div",{key:"dynamic-data",style:{marginBottom:"16px"}},l(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"dynamic-data-input",label:b.dynamicData,value:h,onChange:T,placeholder:b.dynamicDataTag,help:window.bricksData.i18n.enterDynamicDataTagIconFields})),"svg"===w.library&&l("div",{key:"svg-wrapper",style:{marginBottom:"16px"}},[l(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"svg-url",label:window.bricksData.i18n.svgUrl,value:w.svg?.url,onChange:e=>A("url",e),placeholder:window.bricksData.i18n.enterSvgUrl}),l(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"height",label:b.height,value:w.height,onChange:o=>{const a={...w,height:o};t.setAttributes({[e.id]:a})}}),l(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"width",label:b.width,value:w.width,onChange:o=>{const a={...w,width:o};t.setAttributes({[e.id]:a})}}),l(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"stroke-width",label:b.strokeWidth,value:w.strokeWidth,onChange:o=>{const a={...w,strokeWidth:o};t.setAttributes({[e.id]:a})}}),l(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"stroke",label:b.strokeColor,value:w.stroke,onChange:o=>{const a={...w,stroke:o};t.setAttributes({[e.id]:a})},placeholder:"#000000"}),l(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"fill",label:b.fill,value:w.fill,onChange:o=>{const a={...w,fill:o};t.setAttributes({[e.id]:a})},placeholder:"#000000"})]),y&&l("div",{key:"actions",style:{marginTop:"20px",textAlign:"right"}},l(n,{key:"clear",onClick:I,isDestructive:!0,variant:"secondary"},b.clear))])])}catch(e){console.error("Icon control error:",e);const{createElement:t}=window.wp.element;return t("div",{style:{padding:"8px",border:"1px solid red",color:"red"}},bricksData?.i18n?.errorCouldNotLoadIcon)}}function createBricksImageControl(e,t){try{const{Button:o,SelectControl:a,TextControl:i,BaseControl:n}=window.wp.components,{MediaUpload:r,MediaUploadCheck:l}=window.wp.blockEditor,{createElement:s}=window.wp.element,c=t.attributes[e.id]||{},d=c.url||c.id,p=[{label:window.bricksData.i18n.thumbnail150,value:"thumbnail"},{label:window.bricksData.i18n.medium300,value:"medium"},{label:window.bricksData.i18n.large1024,value:"large"},{label:window.bricksData.i18n.fullSize,value:"full"}],u=function(o){try{const a={id:o.id,url:o.url,filename:o.filename||o.title||"",size:c.size||"full"};o.sizes&&o.sizes[a.size]&&(a.url=o.sizes[a.size].url);const i={};i[e.id]=a,t.setAttributes(i)}catch(e){console.error("Image selection error:",e)}},b=function(){try{const o={};o[e.id]={},t.setAttributes(o)}catch(e){console.error("Image removal error:",e)}},w=function(o){try{if(!d||!c.id)return;const a={...c,size:o},i={};i[e.id]=a,t.setAttributes(i)}catch(e){console.error("Image size change error:",e)}},y=function(o){try{if(o){const a={url:o,external:o,filename:o.split("/").pop()||""},i={};i[e.id]=a,t.setAttributes(i)}else b()}catch(e){console.error("External URL change error:",e)}},m=[];return d?(m.push(s("div",{key:"image-preview",style:{marginBottom:"8px",border:"1px solid #ddd",borderRadius:"2px",padding:"8px",position:"relative"}},[s("img",{key:"img",src:c.url,alt:c.filename||"",style:{maxWidth:"100%",height:"auto",display:"block"}}),s("div",{key:"actions",style:{marginTop:"8px",display:"flex",gap:"8px"}},[s(l,{key:"upload-check"},s(r,{key:"upload",onSelect:u,allowedTypes:["image"],value:c.id,render:function(e){return s(o,{onClick:e.open,variant:"secondary",size:"small"},window.bricksData.i18n.replaceImage)}})),s(o,{key:"remove",onClick:b,variant:"secondary",size:"small",isDestructive:!0},window.bricksData.i18n.remove)])])),c.id&&!c.external&&m.push(s(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"size-select",label:window.bricksData.i18n.imageSize,value:c.size||"full",options:p,onChange:w}))):m.push(s(l,{key:"upload-check-empty"},s(r,{key:"upload-empty",onSelect:u,allowedTypes:["image"],render:function(e){return s(o,{onClick:e.open,variant:"secondary",style:{width:"100%",marginBottom:"8px"}},window.bricksData.i18n.selectImage)}}))),c.id||m.push(s(i,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"external-url",label:window.bricksData.i18n.externalUrl,value:c.external&&!0!==c.external?c.external:"",placeholder:"https://example.com/image.jpg",onChange:y})),s(n,{key:e.id,label:e.label,help:e.help||"",__nextHasNoMarginBottom:!0},m)}catch(e){console.error("Image control creation error:",e);const{createElement:t}=window.wp.element;return t("div",{style:{padding:"8px",border:"1px solid red",color:"red"}},window.bricksData.i18n.errorCouldNotLoadImage)}}function createBricksGalleryControl(e,t){try{const{Button:o,SelectControl:a,BaseControl:i,TextControl:n}=window.wp.components,{MediaUpload:r,MediaUploadCheck:l}=window.wp.blockEditor,{createElement:s,useState:c}=window.wp.element;let d=t.attributes[e.id]||{};Array.isArray(d)&&(d={images:d});const p=d.images||[],u=p.length>0,b=d?.useDynamicData?.name||d?.useDynamicData||"",w=e.hasOwnProperty("hasDynamicData")?e.hasDynamicData:"image",[y,m]=c(b),[k,g]=c(null),[x,h]=c(null),_=[{label:window.bricksData.i18n.thumbnail150,value:"thumbnail"},{label:window.bricksData.i18n.medium300,value:"medium"},{label:window.bricksData.i18n.large1024,value:"large"},{label:window.bricksData.i18n.fullSize,value:"full"}],f=function(o){try{const a={images:o.map(e=>({id:e.id,url:e.url,filename:e.filename||e.title||""})),size:d.size||"full"},i={};i[e.id]=a,t.setAttributes(i)}catch(e){console.error("Gallery selection error:",e)}},v=function(o){try{const a=p.filter((e,t)=>t!==o),i=a.length>0&&{images:a,size:d.size||"full"},n={};n[e.id]=i,t.setAttributes(n)}catch(e){console.error("Gallery image removal error:",e)}},D=function(){try{const o={};o[e.id]=!1,t.setAttributes(o)}catch(e){console.error("Gallery clear error:",e)}},C=function(o){try{if(!u)return;const a={images:p,size:o},i={};i[e.id]=a,t.setAttributes(i)}catch(e){console.error("Gallery size change error:",e)}},S=function(o){try{let a;m(o),a=o?{useDynamicData:o,size:d.size||"full"}:{};const i={};i[e.id]=a,t.setAttributes(i)}catch(e){console.error("Gallery dynamic data change error:",e)}},B=(e,t)=>{e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",e.target.innerHTML),g(t)},T=(e,t)=>{e.preventDefault(),e.dataTransfer.dropEffect="move",h(t)},A=()=>{h(null)},I=(o,a)=>{if(o.preventDefault(),null===k||k===a)return;const i=[...p],n=i[k];i.splice(k,1);const r=k<a?a-1:a;i.splice(r,0,n);const l={images:i,size:d.size||"full"},s={};s[e.id]=l,t.setAttributes(s),g(null),h(null)},N=()=>{g(null),h(null)},z=[];if(u||y||z.push(s(l,{key:"no-file-check"},s(r,{onSelect:f,allowedTypes:["image"],multiple:!0,gallery:!0,render:function({open:e}){return s("div",{onClick:e,style:{border:"2px dashed #ddd",padding:"20px",textAlign:"center",cursor:"pointer",opacity:.5,textTransform:"uppercase",letterSpacing:"1px",fontSize:"12px",marginBottom:"12px",transition:"opacity 0.2s ease",":hover":{opacity:1}},onMouseEnter:e=>{e.target.style.opacity="1"},onMouseLeave:e=>{e.target.style.opacity="0.5"}},window.bricksData.i18n.selectImage)}}))),u&&(z.push(s("div",{key:"gallery-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(80px, 1fr))",gap:"8px",marginBottom:"12px",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#f9f9f9"}},p.map((e,t)=>s("div",{key:e.id||t,draggable:!0,onDragStart:e=>B(e,t),onDragOver:e=>T(e,t),onDragLeave:A,onDrop:e=>I(e,t),onDragEnd:N,style:{position:"relative",aspectRatio:"1",overflow:"hidden",borderRadius:"2px",border:"1px solid #ccc",cursor:"move",opacity:k===t?.5:1,transform:x===t?"scale(1.05)":"scale(1)",transition:"transform 0.2s ease"}},[s(l,{key:"media-check"},s(r,{onSelect:f,allowedTypes:["image"],multiple:!0,gallery:!0,value:p.map(e=>e.id).filter(Boolean),render:function({open:t}){return s("img",{src:e.url,alt:e.alt||"",onClick:t,style:{width:"100%",height:"100%",objectFit:"cover",display:"block",cursor:"pointer"}})}})),s(o,{key:"remove",onClick:()=>v(t),variant:"secondary",size:"small",isDestructive:!0,style:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:"2px",right:"2px",minWidth:"16px",width:"16px",height:"16px",padding:"0",fontSize:"10px",lineHeight:"1"}},"×")])))),z.push(s(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"size-select",label:window.bricksData.i18n.imageSize,value:d.size||"full",options:_,onChange:C}))),!y){const e=[];e.push(s(l,{key:"upload-check"},s(r,{key:"upload",onSelect:f,allowedTypes:["image"],multiple:!0,gallery:!0,value:p.map(e=>e.id).filter(Boolean),render:function(e){return s(o,{onClick:e.open,variant:u?"secondary":"primary",style:{width:"100%",marginBottom:u?"8px":"0"}},u?window.bricksData.i18n.addImages:window.bricksData.i18n.selectImages)}}))),u&&e.push(s(o,{key:"clear",onClick:D,variant:"secondary",isDestructive:!0,style:{width:"100%"}},window.bricksData.i18n.clearGallery)),z.push(s("div",{key:"actions",style:{marginTop:u?"12px":"0"}},e))}return w&&z.push(s(n,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"dynamic-data",placeholder:window.bricksData.i18n.dynamicData,value:y,onChange:S,style:{marginTop:"12px"}})),s(i,{key:e.id,label:e.label,help:e.help,__nextHasNoMarginBottom:!0},z)}catch(e){const{createElement:t}=window.wp.element;return t("div",{style:{padding:"8px",border:"1px solid red",color:"red"}},window.bricksData.i18n.errorCouldNotLoadGallery)}}function createBricksLinkControl(e,t){try{const{SelectControl:o,TextControl:a,CheckboxControl:i,BaseControl:n,Button:r}=window.wp.components,{MediaUpload:l,MediaUploadCheck:s}=window.wp.blockEditor,{createElement:c,useState:d,useEffect:p}=window.wp.element,u=t.attributes[e.id]||{},b=u.type&&(u.url||u.postId||u.taxonomy||u.useDynamicData),[w,y]=d([]),[m,k]=d([]),[g,x]=d(!1),h=window.createBricksSelectControl({id:"postId",label:window.bricksData.i18n.selectPost||window.bricksData.i18n.post,placeholder:window.bricksData.i18n.selectPost||window.bricksData.i18n.post,optionsAjax:{action:"bricks_get_posts",postType:"any",addLanguageToPostTitle:"true"}},{...t,attributes:{...t.attributes,postId:u.postId||""},setAttributes:e=>{B(e.postId)}}),_=Array.isArray(e.exclude)?e.exclude:[],f=[{label:window.bricksData.i18n.selectLinkType,value:""},{label:window.bricksData.i18n.internal,value:"internal"},{label:`${window.bricksData.i18n.taxonomy} (${window.bricksData.i18n.term})`,value:"taxonomy"},{label:window.bricksData.i18n.dynamicData,value:"meta"},{label:`${window.bricksData.i18n.customURL}`,value:"external"},{label:window.bricksData.i18n.media,value:"media"}];!1!==e.popup&&f.push({label:window.bricksData.i18n.lightboxImage,value:"lightboxImage"},{label:window.bricksData.i18n.lightboxVideo,value:"lightboxVideo"});const v=f.filter(e=>!_.includes(e.value)),D=e=>!_.includes(e),C=function(o){try{const a=!!o&&{type:o,..."external"===o&&u.url?{url:u.url}:{},..."internal"===o&&u.postId?{postId:u.postId}:{},...u.newTab?{newTab:u.newTab}:{},...u.rel?{rel:u.rel}:{},...u.ariaLabel?{ariaLabel:u.ariaLabel}:{},...u.title?{title:u.title}:{}},i={};i[e.id]=a,t.setAttributes(i)}catch(e){console.error("Link control error:",e)}},S=function(o){try{const a={...u,url:o};delete a.postId;const i={};i[e.id]=a,t.setAttributes(i)}catch(e){console.error("Link control error:",e)}},B=function(o){try{const a={...u,postId:o};delete a.url;const i={};i[e.id]=a,t.setAttributes(i)}catch(e){console.error("Link control error:",e)}},T=function(o){try{const a={...u,newTab:o},i={};i[e.id]=a,t.setAttributes(i)}catch(e){console.error("Link control error:",e)}},A=function(o){try{const a={...u,rel:o||void 0},i={};i[e.id]=a,t.setAttributes(i)}catch(e){console.error("Link control error:",e)}},I=function(o){try{const a={...u,ariaLabel:o||void 0},i={};i[e.id]=a,t.setAttributes(i)}catch(e){console.error("Link control error:",e)}},N=function(o){try{const a={...u,title:o||void 0},i={};i[e.id]=a,t.setAttributes(i)}catch(e){console.error("Link control error:",e)}},z=function(o){try{const a={...u,taxonomy:o};delete a.term;const i={};i[e.id]=a,t.setAttributes(i),o?G(o):k([])}catch(e){console.error("Link control error:",e)}},M=function(o){try{const a={...u,term:o},i={};i[e.id]=a,t.setAttributes(i)}catch(e){console.error("Link control error:",e)}},E=function(o){try{const a={...u,useDynamicData:o||void 0},i={};i[e.id]=a,t.setAttributes(i)}catch(e){console.error("Link control error:",e)}},L=function(o){try{const a={...u,urlParams:o||void 0},i={};i[e.id]=a,t.setAttributes(i)}catch(e){console.error("Link control error:",e)}},H=function(o){try{const a={...u,lightboxImage:o||void 0},i={};i[e.id]=a,t.setAttributes(i)}catch(e){console.error("Link control error:",e)}},j=function(o){try{const a={...u,lightboxVideo:o||void 0},i={};i[e.id]=a,t.setAttributes(i)}catch(e){console.error("Link control error:",e)}},O=function(o){try{const a={...u,lightboxVideoNoControls:o||void 0},i={};i[e.id]=a,t.setAttributes(i)}catch(e){console.error("Link control error:",e)}},q=function(o){try{const a={...u,lightboxAnimationType:o||void 0},i={};i[e.id]=a,t.setAttributes(i)}catch(e){console.error("Link control error:",e)}},R=function(o){try{const a={...u,lightboxId:o||void 0},i={};i[e.id]=a,t.setAttributes(i)}catch(e){console.error("Link control error:",e)}},P=function(){try{const o={};o[e.id]=!1,t.setAttributes(o)}catch(e){console.error("Link control error:",e)}},$=async()=>{try{if(window.bricksData&&window.bricksData.controlOptions&&window.bricksData.controlOptions.taxonomies){const e=Object.entries(window.bricksData.controlOptions.taxonomies).map(([e,t])=>({label:t,value:e}));y(e)}else{const e=await fetch("/wp-json/wp/v2/taxonomies");if(e.ok){const t=await e.json(),o=Object.entries(t).filter(([,e])=>e.public).map(([e,t])=>({label:t.name,value:e}));y(o)}}}catch(e){console.error("Failed to load taxonomies:",e)}},G=async e=>{try{x(!0);const t=await fetch(`/wp-json/wp/v2/${e}?per_page=100`);if(t.ok){const e=(await t.json()).map(e=>({label:e.name,value:e.id}));k(e)}}catch(e){console.error("Failed to load terms:",e)}finally{x(!1)}};p(()=>{$()},[]),p(()=>{u.taxonomy&&G(u.taxonomy)},[u.taxonomy]);const W=[];if(W.push(c(o,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"type",label:window.bricksData.i18n.linkType,value:u.type||"",options:v,onChange:C})),"external"===u.type&&W.push(c(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"url",label:window.bricksData.i18n.url,value:u.url||"",placeholder:window.bricksData.i18n.httpsExampleCom,onChange:S})),"internal"===u.type&&W.push(h),"media"===u.type&&W.push(c(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"url",label:window.bricksData.i18n.mediaUrl,value:u.url||"",placeholder:window.bricksData.i18n.httpsExampleComFile,help:window.bricksData.i18n.enterUrlOfMedia,onChange:S})),"taxonomy"===u.type&&(W.push(c(o,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"taxonomy",label:window.bricksData.i18n.taxonomy,value:u.taxonomy||"",options:[{label:window.bricksData.i18n.selectTaxonomy,value:""},...w],onChange:z})),u.taxonomy&&W.push(c(o,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"term",label:window.bricksData.i18n.term,value:u.term||"",options:[{label:g?window.bricksData.i18n.loading:window.bricksData.i18n.selectTerm,value:""},...m],disabled:g,onChange:M}))),"meta"===u.type&&W.push(c(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"useDynamicData",label:window.bricksData.i18n.dynamicData,value:u.useDynamicData||"",placeholder:window.bricksData.i18n.dynamicData,help:window.bricksData.i18n.dynamicDataDescription,onChange:E})),"internal"===u.type&&u.postId&&W.push(c(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"urlParams",label:window.bricksData.i18n.urlParameters,value:u.urlParams||"",placeholder:"?source=brx#faq",onChange:L})),"lightboxImage"===u.type){if(W.push(c("div",{key:"lightbox-info",style:{padding:"8px 12px",backgroundColor:"#e7f3ff",border:"1px solid #8bb9de",borderRadius:"4px",marginBottom:"12px",fontSize:"12px",color:"#0073aa"}},window.bricksData.i18n.infoLightbox)),W.push(c(s,{key:"media-check-lightbox"},c(l,{onSelect:H,allowedTypes:["image"],value:u.lightboxImage?.id||"",render:({open:e})=>c("div",{key:"lightbox-image-container"},[u.lightboxImage?.url&&c("img",{key:"preview",src:u.lightboxImage.url,style:{maxWidth:"100%",height:"100px",objectFit:"cover",marginBottom:"8px",borderRadius:"4px"}}),c(r,{key:"select-button",onClick:e,variant:u.lightboxImage?"secondary":"primary",style:{width:"100%",marginBottom:"8px"}},u.lightboxImage?window.bricksData.i18n.changeImage:window.bricksData.i18n.selectImage),u.lightboxImage&&c(r,{key:"remove-button",onClick:()=>H(null),variant:"secondary",isDestructive:!0,style:{width:"100%"}},window.bricksData.i18n.removeImage)].filter(Boolean))}))),window.bricksData.controlOptions?.lightboxAnimationTypes){const e=Object.entries(window.bricksData.controlOptions.lightboxAnimationTypes).map(([e,t])=>({label:t,value:e}));W.push(c(o,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"lightboxAnimationType",label:window.bricksData.i18n.lightboxAnimation,value:u.lightboxAnimationType||"",options:[{label:window.bricksData.i18n.zoom,value:""},...e],onChange:q}))}W.push(c(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"lightboxId",label:window.bricksData.i18n.lightboxId,value:u.lightboxId||"",placeholder:window.bricksData.i18n.lightboxIdPlaceholder,onChange:R}))}if("lightboxVideo"===u.type&&(W.push(c("div",{key:"lightbox-video-info",style:{padding:"8px 12px",backgroundColor:"#e7f3ff",border:"1px solid #8bb9de",borderRadius:"4px",marginBottom:"12px",fontSize:"12px",color:"#0073aa"}},window.bricksData.i18n.infoLightbox)),W.push(c(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"lightboxVideo",label:window.bricksData.i18n.videoUrl,value:u.lightboxVideo||"",placeholder:"https://www.youtube.com/watch?v=...",help:window.bricksData.i18n.descriptionLightboxVideo,onChange:j})),u.lightboxVideo&&W.push(c(i,{__nextHasNoMarginBottom:!0,key:"lightboxVideoNoControls",label:`${window.bricksData.i18n.disable}: ${window.bricksData.i18n.controls}`,checked:u.lightboxVideoNoControls||!1,onChange:O}))),u.type&&["external","internal","media","taxonomy","meta"].includes(u.type)){D("newTab")&&W.push(c(i,{__nextHasNoMarginBottom:!0,key:"newTab",label:window.bricksData.i18n.openInNewTab,checked:u.newTab||!1,onChange:T}));const e=[];D("rel")&&e.push(c(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"rel",label:"rel",value:u.rel||"",placeholder:"nofollow noopener",onChange:A})),D("ariaLabel")&&e.push(c(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"ariaLabel",label:"aria-label",value:u.ariaLabel||"",onChange:I})),D("title")&&e.push(c(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"link-title-control",label:"title",value:u.title||"",onChange:N})),e.length>0&&W.push(c("div",{key:"attributes",style:{marginTop:"16px",padding:"12px",backgroundColor:"#f9f9f9",border:"1px solid #e0e0e0",borderRadius:"4px"}},[c("h4",{key:"link-attributes-title",style:{margin:"0 0 8px 0",fontSize:"12px",fontWeight:"600",color:"#555"}},window.bricksData.i18n.linkAttributes),...e]))}if(b){const e="external"===u.type||"media"===u.type?u.url:"internal"===u.type?`${window.bricksData.i18n.post}: ${u.postId}`:window.bricksData.i18n.linkConfigured;W.push(c("div",{key:"link-preview",style:{marginTop:"12px",padding:"8px",border:"1px solid #ddd",borderRadius:"2px",backgroundColor:"#f8f9fa"}},[c("div",{key:"preview-header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"4px"}},[c("div",{key:"preview-info",style:{flex:1}},[c("div",{key:"type",style:{fontSize:"11px",fontWeight:"600",color:"#666",textTransform:"uppercase",marginBottom:"2px"}},u.type),c("div",{key:"preview",style:{fontSize:"12px",color:"#333",wordBreak:"break-all"}},e)]),c(r,{key:"clear",onClick:P,variant:"secondary",size:"small",isDestructive:!0},window.bricksData.i18n.clear)]),u.newTab||u.rel||u.ariaLabel||u.title?c("div",{key:"attributes-preview",style:{marginTop:"8px",fontSize:"11px",color:"#666"}},[u.newTab?c("span",{key:"newtab",style:{marginRight:"8px"}},window.bricksData.i18n.newTab):null,u.rel?c("span",{key:"rel",style:{marginRight:"8px"}},`rel="${u.rel}"`):null,u.ariaLabel?c("span",{key:"aria",style:{marginRight:"8px"}},`aria-label="${u.ariaLabel}"`):null,u.title?c("span",{key:"link-title-preview"},`title="${u.title}"`):null].filter(Boolean)):null]))}return c(n,{key:e.id,label:e.label,__nextHasNoMarginBottom:!0},W)}catch(e){console.error("Link control error:",e);const{createElement:t}=window.wp.element;return t("div",{style:{padding:"8px",border:"1px solid red",color:"red"}},window.bricksData.i18n.errorCouldNotLoadLink)}}function createBricksQueryControl(e,t){try{const{SelectControl:o,TextControl:a,CheckboxControl:i,BaseControl:n,Button:r,Panel:l,PanelBody:s,ColorPicker:c,__experimentalNumberControl:d}=window.wp.components,{createElement:p,useState:u,useEffect:b}=window.wp.element,w=t.attributes[e.id]||{},y=Object.keys(w).length>0,m=w.objectType,[k,g]=u([]),[x,h]=u([]),[_,f]=u([]),v=window.createBricksSelectControl({id:"objectType",label:window.bricksData.i18n.queryType,options:{post:window.bricksData.i18n.post,term:window.bricksData.i18n.term,user:window.bricksData.i18n.user},multiple:!1,placeholder:window.bricksData.i18n.post},{attributes:{...w,objectType:m},setAttributes:e=>{O("objectType",e.objectType)}}),D=window.createBricksSelectControl({id:"post_type",label:window.bricksData.i18n.postTypes,options:k.reduce((e,t)=>(e[t.value]=t.label,e),{}),multiple:!0,placeholder:window.bricksData.i18n.select},{attributes:{...w,post_type:w.post_type},setAttributes:e=>{O("post_type",e.post_type)}}),C=window.createBricksSelectControl({id:"taxonomy",label:window.bricksData.i18n.taxonomy,options:x.reduce((e,t)=>(e[t.value]=t.label,e),{}),multiple:!0,placeholder:window.bricksData.i18n.selectTaxonomies},{attributes:{...w,taxonomy:w.taxonomy||[]},setAttributes:e=>{O("taxonomy",e.taxonomy)}}),S=window.createBricksSelectControl({id:"role__in",label:window.bricksData.i18n.userRoles,options:_.reduce((e,t)=>(e[t.value]=t.label,e),{}),multiple:!0},{attributes:{...w,role__in:w.role__in||[]},setAttributes:e=>{O("role__in",e.role__in)}}),B=window.createBricksSelectControl({id:"post__in",label:window.bricksData.i18n.includePosts,multiple:!0,optionsAjax:{action:"bricks_get_posts",postType:Array.isArray(w.post_type)?w.post_type:w.post_type?[w.post_type]:"any",addLanguageToPostTitle:"true"}},{...t,attributes:{...t.attributes,post__in:w.post__in||[]},setAttributes:e=>{O("post__in",e.post__in)}}),T=window.createBricksSelectControl({id:"post__not_in",label:window.bricksData.i18n.excludePosts,multiple:!0,optionsAjax:{action:"bricks_get_posts",postType:Array.isArray(w.post_type)?w.post_type:w.post_type?[w.post_type]:"any",addLanguageToPostTitle:"true"}},{...t,attributes:{...t.attributes,post__not_in:w.post__not_in||[]},setAttributes:e=>{O("post__not_in",e.post__not_in)}}),A=window.createBricksSelectControl({id:"tax_query",label:window.bricksData.i18n.includeTerms,multiple:!0,optionsAjax:{action:"bricks_get_terms_options",addLanguageToTermName:"true",postTypes:Array.isArray(w.post_type)?w.post_type:w.post_type?[w.post_type]:["any"],postId:window.bricksGutenbergData?.postId,"bricks-is-builder":"1"}},{...t,attributes:{...t.attributes,tax_query:w.tax_query||[]},setAttributes:e=>{O("tax_query",e.tax_query)}}),I=window.createBricksSelectControl({id:"tax_query_not",label:window.bricksData.i18n.excludeTerms,multiple:!0,optionsAjax:{action:"bricks_get_terms_options",addLanguageToTermName:"true",postTypes:Array.isArray(w.post_type)?w.post_type:w.post_type?[w.post_type]:["any"],postId:window.bricksGutenbergData?.postId,"bricks-is-builder":"1"}},{...t,attributes:{...t.attributes,tax_query_not:w.tax_query_not||[]},setAttributes:e=>{O("tax_query_not",e.tax_query_not)}});b(()=>{if(window.bricksGutenbergData?.postTypes){const e=Object.entries(window.bricksGutenbergData.postTypes).map(([e,t])=>({label:t,value:e}));e.unshift({label:window.bricksData.i18n.any,value:"any"}),g(e)}if(window.bricksGutenbergData?.taxonomies){const e=Object.entries(window.bricksGutenbergData.taxonomies).map(([e,t])=>({label:t.labels?.singular_name||t.label||e,value:e}));h(e)}if(window.bricksGutenbergData?.userRoles){const e=Object.entries(window.bricksGutenbergData.userRoles).map(([e,t])=>({label:t,value:e}));f(e)}},[]);const N=e=>"term"===e?[{label:window.bricksData.i18n.name,value:"name"},{label:window.bricksData.i18n.slug,value:"slug"},{label:window.bricksData.i18n.termGroup,value:"term_group"},{label:window.bricksData.i18n.termId,value:"term_id"},{label:"ID",value:"id"},{label:window.bricksData.i18n.description,value:"description"},{label:window.bricksData.i18n.parent,value:"parent"},{label:window.bricksData.i18n.count,value:"count"}]:"user"===e?[{label:window.bricksData.i18n.login,value:"login"},{label:window.bricksData.i18n.nicename,value:"nicename"},{label:window.bricksData.i18n.email,value:"email"},{label:"URL",value:"url"},{label:window.bricksData.i18n.registered,value:"registered"},{label:window.bricksData.i18n.displayName,value:"display_name"},{label:window.bricksData.i18n.postCount,value:"post_count"},{label:"ID",value:"ID"},{label:window.bricksData.i18n.metaValue,value:"meta_value"},{label:window.bricksData.i18n.metaValueNum,value:"meta_value_num"}]:[{label:window.bricksData.i18n.date,value:"date"},{label:window.bricksData.i18n.title,value:"title"},{label:window.bricksData.i18n.menuOrder,value:"menu_order"},{label:window.bricksData.i18n.random,value:"rand"},{label:window.bricksData.i18n.id,value:"ID"},{label:window.bricksData.i18n.author,value:"author"},{label:window.bricksData.i18n.modified,value:"modified"},{label:window.bricksData.i18n.parent,value:"parent"},{label:window.bricksData.i18n.commentCount,value:"comment_count"},{label:window.bricksData.i18n.metaValue,value:"meta_value"},{label:window.bricksData.i18n.metaValueNum,value:"meta_value_num"},{label:window.bricksData.i18n.name,value:"name"},{label:window.bricksData.i18n.type,value:"type"}],z=[{label:window.bricksData.i18n.ascending,value:"ASC"},{label:window.bricksData.i18n.descending,value:"DESC"}],M=[{label:window.bricksData.i18n.equal,value:"="},{label:window.bricksData.i18n.notEqual,value:"!="},{label:window.bricksData.i18n.greaterThan,value:">"},{label:window.bricksData.i18n.greaterThanOrEqual,value:">="},{label:window.bricksData.i18n.lesserThan,value:"<"},{label:window.bricksData.i18n.lesserOrEqual,value:"<="},{label:window.bricksData.i18n.like,value:"LIKE"},{label:window.bricksData.i18n.notLike,value:"NOT LIKE"},{label:window.bricksData.i18n.in,value:"IN"},{label:window.bricksData.i18n.notIn,value:"NOT IN"},{label:window.bricksData.i18n.between,value:"BETWEEN"},{label:window.bricksData.i18n.notBetween,value:"NOT BETWEEN"},{label:window.bricksData.i18n.exists,value:"EXISTS"},{label:window.bricksData.i18n.notExists,value:"NOT EXISTS"}],E=[{label:window.bricksData.i18n.char,value:"CHAR"},{label:window.bricksData.i18n.numeric,value:"NUMERIC"},{label:window.bricksData.i18n.binary,value:"BINARY"},{label:window.bricksData.i18n.date,value:"DATE"},{label:window.bricksData.i18n.datetime,value:"DATETIME"},{label:window.bricksData.i18n.decimal,value:"DECIMAL"},{label:window.bricksData.i18n.signed,value:"SIGNED"},{label:window.bricksData.i18n.time,value:"TIME"},{label:window.bricksData.i18n.unsigned,value:"UNSIGNED"}],L=[{label:window.bricksData.i18n.in,value:"IN"},{label:window.bricksData.i18n.notIn,value:"NOT IN"},{label:window.bricksData.i18n.and,value:"AND"},{label:window.bricksData.i18n.exists,value:"EXISTS"},{label:window.bricksData.i18n.notExists,value:"NOT EXISTS"}],H=[{label:window.bricksData.i18n.termId,value:"term_id"},{label:window.bricksData.i18n.name,value:"name"},{label:window.bricksData.i18n.slug,value:"slug"},{label:window.bricksData.i18n.termTaxonomyId,value:"term_taxonomy_id"}],j=[{label:window.bricksData.i18n.default,value:"default"},{label:window.bricksData.i18n.ellipsis,value:"ellipsis"},{label:window.bricksData.i18n.ring,value:"ring"},{label:window.bricksData.i18n.dualRing,value:"dual-ring"},{label:window.bricksData.i18n.facebook,value:"facebook"},{label:window.bricksData.i18n.roller,value:"roller"},{label:window.bricksData.i18n.ripple,value:"ripple"},{label:window.bricksData.i18n.spinner,value:"spinner"}],O=function(o,a){try{let i={...w};""===a||null==a?delete i[o]:i[o]=a,"objectType"===o&&(i={objectType:a}),"post_type"===o&&(delete i.post__in,delete i.post__not_in);const n={};n[e.id]=Object.keys(i).length>0?i:{},t.setAttributes(n)}catch(e){console.error("🔍 [Query Control] Query update error:",e)}},q=function(e,t,o){try{const a=Array.isArray(w.meta_query)?[...w.meta_query]:[];a[e]||(a[e]={}),""===o||null==o?delete a[e][t]:a[e][t]=o;const i=a.filter(e=>e&&Object.keys(e).length>0&&e.key);O("meta_query",i.length>0?i:"")}catch(e){console.error("Meta query update error:",e)}},R=function(){const e=Array.isArray(w.meta_query)?[...w.meta_query]:[];e.push({key:"",value:"",compare:"=",type:"CHAR"}),O("meta_query",e)},P=function(e){const t=Array.isArray(w.meta_query)?[...w.meta_query]:[];t.splice(e,1),O("meta_query",t.length>0?t:"")},$=function(e,t,o){try{const a=Array.isArray(w.tax_query_advanced)?[...w.tax_query_advanced]:[];a[e]||(a[e]={}),""===o||null==o?delete a[e][t]:a[e][t]=o;const i=a.filter(e=>e&&Object.keys(e).length>0&&e.taxonomy);O("tax_query_advanced",i.length>0?i:"")}catch(e){console.error("Tax query update error:",e)}},G=function(){const e=Array.isArray(w.tax_query_advanced)?[...w.tax_query_advanced]:[];e.push({taxonomy:"",field:"term_id",terms:"",operator:"IN",include_children:!0}),O("tax_query_advanced",e)},W=function(e){const t=Array.isArray(w.tax_query_advanced)?[...w.tax_query_advanced]:[];t.splice(e,1),O("tax_query_advanced",t.length>0?t:"")},U=function(){try{const o={};o[e.id]={},t.setAttributes(o)}catch(e){console.error("Clear query error:",e)}},F=[];if(F.push(p(s,{key:"query-panel",title:window.bricksData.i18n.querySettings,initialOpen:!0},[v,...m&&"post"!==m?[]:[D],..."attachment"===w.post_type?[p(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"post_mime_type",label:window.bricksData.i18n.mimeType,value:w.post_mime_type||"",placeholder:"image",onChange:e=>O("post_mime_type",e),help:window.bricksData.i18n.mimeTypeDesc})]:[],..."term"===m?[C]:[],..."user"===m?[S]:[],p("div",{key:"orderby-wrapper",style:{position:"relative",marginBottom:"8px"}},[p("label",{key:"label",style:{display:"block",marginBottom:"8px",fontSize:"11px",fontWeight:"500",textTransform:"uppercase",color:"#1e1e1e"}},window.bricksData.i18n.orderBy),p("select",{key:"select",value:w.orderby||"orderby-default",onChange:e=>O("orderby","orderby-default"===e.target.value?"":e.target.value),style:{width:"100%",minHeight:"40px",padding:"8px 12px",border:"1px solid #949494",borderRadius:"2px",backgroundColor:"#fff",fontSize:"13px",lineHeight:"1.4"}},[p("option",{key:"orderby-default",value:"orderby-default"},window.bricksData.i18n.default),...N(m).map(e=>p("option",{key:e.value,value:e.value},e.label))])]),...w.orderby&&["meta_value","meta_value_num"].includes(w.orderby)?[p(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"meta_key",label:window.bricksData.i18n.metaKey,value:w.meta_key||"",placeholder:"custom_field_key",onChange:e=>O("meta_key",e)})]:[],..."rand"!==w.orderby||m&&"post"!==m?[]:[p(d||a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"randomSeedTtl",label:window.bricksData.i18n.randomSeedTtl,value:w.randomSeedTtl||"",placeholder:"60",type:"number",min:0,onChange:e=>O("randomSeedTtl",e?parseInt(e):""),help:window.bricksData.i18n.howLongToKeep})],p("div",{key:"order-wrapper",style:{position:"relative",marginBottom:"16px"}},[p("label",{key:"label",style:{display:"block",marginBottom:"8px",fontSize:"11px",fontWeight:"500",textTransform:"uppercase",color:"#1e1e1e"}},window.bricksData.i18n.order),p("select",{key:"select",value:w.order||"order-default",onChange:e=>O("order","order-default"===e.target.value?"":e.target.value),style:{width:"100%",minHeight:"40px",padding:"8px 12px",border:"1px solid #949494",borderRadius:"2px",backgroundColor:"#fff",fontSize:"13px",lineHeight:"1.4"}},[p("option",{key:"order-default",value:"order-default"},window.bricksData.i18n.default),...z.map(e=>p("option",{key:e.value,value:e.value},e.label))])]),...m&&"post"!==m?[]:[p(d||a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"posts_per_page",label:window.bricksData.i18n.postsPerPage,value:w.posts_per_page||"",placeholder:"10",type:"number",min:-1,onChange:e=>O("posts_per_page",e?parseInt(e):"")})],..."user"===m||"term"===m?[p(d||a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"number",label:window.bricksData.i18n.number,value:w.number||"",placeholder:"10",type:"number",min:-1,onChange:e=>O("number",e?parseInt(e):""),help:"user"===m?window.bricksData.i18n.numberOfUsersToRetrieve:void 0})]:[],p(d||a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"offset",label:window.bricksData.i18n.offset,value:w.offset||"",placeholder:"0",type:"number",min:0,onChange:e=>O("offset",e?parseInt(e):"")}),...m&&"post"!==m?[]:[p(d||a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"post_parent",label:`${window.bricksData.i18n.childOf} (${window.bricksData.i18n.postParentId})`,value:w.post_parent||"",type:"number",onChange:e=>O("post_parent",e?parseInt(e):"")})],..."term"===m?[p(d||a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"parent",label:window.bricksData.i18n.parentTerm,value:w.parent||"",placeholder:window.bricksData.i18n.parentTermId,type:"number",onChange:e=>O("parent",e?parseInt(e):""),help:window.bricksData.i18n.filterByParentTerm})]:[],..."term"===m?[p(d||a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"child_of",label:window.bricksData.i18n.childOf,value:w.child_of||"",placeholder:window.bricksData.i18n.parentTermId,type:"number",onChange:e=>O("child_of",e?parseInt(e):"")})]:[],..."term"===m?[p(i,{__nextHasNoMarginBottom:!0,key:"current_post_term",label:window.bricksData.i18n.currentPostTerm,checked:w.current_post_term||!1,onChange:e=>O("current_post_term",e),help:window.bricksData.i18n.getTermsFromCurrent})]:[],..."user"===m?[p(i,{__nextHasNoMarginBottom:!0,key:"current_post_author",label:window.bricksData.i18n.currentPostAuthor,checked:w.current_post_author||!1,onChange:e=>O("current_post_author",e),help:window.bricksData.i18n.getCurrentPostAuthor})]:[],..."term"===m?[p(i,{__nextHasNoMarginBottom:!0,key:"childless",label:window.bricksData.i18n.childlessTermsOnly,checked:w.childless||!1,onChange:e=>O("childless",e),help:window.bricksData.i18n.onlyReturnTerms})]:[],...m&&"post"!==m?[]:[p(i,{__nextHasNoMarginBottom:!0,key:"ignore_sticky_posts",label:window.bricksData.i18n.ignoreStickyPosts,checked:w.ignore_sticky_posts||!1,onChange:e=>O("ignore_sticky_posts",e)})],p(i,{__nextHasNoMarginBottom:!0,key:"disable_query_merge",label:window.bricksData.i18n.disableQueryMerge,checked:w.disable_query_merge||!1,onChange:e=>O("disable_query_merge",e)}),...m&&"post"!==m?[]:[p(i,{__nextHasNoMarginBottom:!0,key:"is_archive_main_query",label:window.bricksData.i18n.isArchiveMainQuery,checked:w.is_archive_main_query||!1,onChange:e=>O("is_archive_main_query",e)})],...m&&"post"!==m?[]:[B],...m&&"post"!==m?[]:[T],...m&&"post"!==m?[]:[p(i,{__nextHasNoMarginBottom:!0,key:"exclude_current_post",label:window.bricksData.i18n.excludeCurrentPost,checked:w.exclude_current_post||!1,onChange:e=>O("exclude_current_post",e)})],..."term"===m?[p(i,{__nextHasNoMarginBottom:!0,key:"show_empty",label:window.bricksData.i18n.showEmptyTerms,checked:w.show_empty||!1,onChange:e=>O("show_empty",e)})]:[],...m&&"post"!==m&&"term"!==m?[]:[A],...m&&"post"!==m&&"term"!==m?[]:[I],...m&&"post"!==m||"product"!==w.post_type?[]:[p("div",{key:"woo-separator",style:{borderTop:"1px solid #ddd",paddingTop:"16px",marginTop:"16px",marginBottom:"8px"}},[p("h4",{key:"woo-title",style:{margin:"0 0 12px 0",fontSize:"14px",fontWeight:"600",color:"#1e1e1e"}},"WooCommerce")]),p(i,{__nextHasNoMarginBottom:!0,key:"onSale",label:window.bricksData.i18n.onSaleProductsOnly,checked:w.onSale||!1,onChange:e=>O("onSale",e)}),p(i,{__nextHasNoMarginBottom:!0,key:"featured",label:window.bricksData.i18n.featuredProductsOnly,checked:w.featured||!1,onChange:e=>O("featured",e),help:window.bricksData.i18n.showOnlyFeatured}),p(i,{__nextHasNoMarginBottom:!0,key:"hideOutOfStock",label:window.bricksData.i18n.hideOutOfStock,checked:w.hideOutOfStock||!1,onChange:e=>O("hideOutOfStock",e)}),p(i,{__nextHasNoMarginBottom:!0,key:"relatedProducts",label:window.bricksData.i18n.relatedProducts,checked:w.relatedProducts||!1,onChange:e=>O("relatedProducts",e),help:window.bricksData.i18n.showProductsRelated}),p(i,{__nextHasNoMarginBottom:!0,key:"upSells",label:window.bricksData.i18n.upSells,checked:w.upSells||!1,onChange:e=>O("upSells",e),help:window.bricksData.i18n.showUpSellProducts}),p(i,{__nextHasNoMarginBottom:!0,key:"crossSells",label:window.bricksData.i18n.crossSells,checked:w.crossSells||!1,onChange:e=>O("crossSells",e),help:window.bricksData.i18n.showCrossSellProducts}),p(i,{__nextHasNoMarginBottom:!0,key:"cartCrossSells",label:window.bricksData.i18n.cartCrossSells,checked:w.cartCrossSells||!1,onChange:e=>O("cartCrossSells",e),help:window.bricksData.i18n.showCartCrossSells})],p("div",{key:"meta-query-separator",style:{borderTop:"1px solid #ddd",paddingTop:"16px",marginTop:"16px",marginBottom:"8px"}},[p("h4",{key:"meta-query-title",style:{margin:"0 0 12px 0",fontSize:"14px",fontWeight:"600",color:"#1e1e1e"}},window.bricksData.i18n.metaQuery)]),...Array.isArray(w.meta_query)&&w.meta_query.length>0?[p("div",{key:"meta_query_relation-wrapper",style:{position:"relative"}},[p(o,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"meta_query_relation",label:window.bricksData.i18n.relation,value:w.meta_query_relation||"AND",options:[{label:"AND",value:"AND"},{label:"OR",value:"OR"}],onChange:e=>O("meta_query_relation",e)})])]:[],...Array.isArray(w.meta_query)?w.meta_query.map((e,t)=>p("div",{key:`meta-query-${t}`,style:{border:"1px solid #ddd",borderRadius:"4px",padding:"12px",marginBottom:"12px",backgroundColor:"#f9f9f9"}},[p("div",{key:"meta-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"}},[p("strong",{key:"title"},`${window.bricksData.i18n.metaQuery} ${t+1}`),p(r,{key:"remove",onClick:()=>P(t),variant:"secondary",size:"small",isDestructive:!0},window.bricksData.i18n.remove)]),p(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"key",label:window.bricksData.i18n.metaKey,value:e.key||"",placeholder:"custom_field_key",onChange:e=>q(t,"key",e)}),p(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"value",label:window.bricksData.i18n.metaValue,value:e.value||"",placeholder:"value",onChange:e=>q(t,"value",e)}),p("div",{key:`meta-compare-wrapper-${t}`,style:{position:"relative"}},[p(o,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"compare",label:window.bricksData.i18n.compare,value:e.compare||"=",options:M,onChange:e=>q(t,"compare",e)})]),p("div",{key:`meta-type-wrapper-${t}`,style:{position:"relative"}},[p(o,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"type",label:window.bricksData.i18n.type,value:e.type||"CHAR",options:E,onChange:e=>q(t,"type",e)})]),p(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"clause_name",label:window.bricksData.i18n.clauseName,value:e.clause_name||"",placeholder:"clause_name",onChange:e=>q(t,"clause_name",e),help:window.bricksData.i18n.clauseNameDesc})])):[],p(r,{key:"add-meta-query",onClick:R,variant:"secondary",style:{marginTop:"12px",marginBottom:"16px"}},window.bricksData.i18n.addMetaQuery),...m&&"post"!==m?[]:[p("div",{key:"tax-query-separator",style:{borderTop:"1px solid #ddd",paddingTop:"16px",marginTop:"16px",marginBottom:"8px"}},[p("h4",{key:"tax-query-title",style:{margin:"0 0 12px 0",fontSize:"14px",fontWeight:"600",color:"#1e1e1e"}},window.bricksData.i18n.taxonomyQuery)]),...Array.isArray(w.tax_query_advanced)&&w.tax_query_advanced.length>0?[p("div",{key:"tax_query_relation-wrapper",style:{position:"relative"}},[p(o,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"tax_query_relation",label:window.bricksData.i18n.relation,value:w.tax_query_relation||"AND",options:[{label:"AND",value:"AND"},{label:"OR",value:"OR"}],onChange:e=>O("tax_query_relation",e)})])]:[],...Array.isArray(w.tax_query_advanced)?w.tax_query_advanced.map((e,t)=>p("div",{key:`tax-query-${t}`,style:{border:"1px solid #ddd",borderRadius:"4px",padding:"12px",marginBottom:"12px",backgroundColor:"#f9f9f9"}},[p("div",{key:"tax-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"}},[p("strong",{key:"title"},`${window.bricksData.i18n.taxonomyQuery} ${t+1}`),p(r,{key:"remove",onClick:()=>W(t),variant:"secondary",size:"small",isDestructive:!0},window.bricksData.i18n.remove)]),p("div",{key:`tax-taxonomy-wrapper-${t}`,style:{position:"relative"}},[p(o,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"taxonomy",label:window.bricksData.i18n.taxonomy,value:e.taxonomy||"",options:x,onChange:e=>$(t,"taxonomy",e)})]),p("div",{key:`tax-field-wrapper-${t}`,style:{position:"relative"}},[p(o,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"field",label:window.bricksData.i18n.field,value:e.field||"term_id",options:H,onChange:e=>$(t,"field",e)})]),p(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"terms",label:window.bricksData.i18n.terms,value:e.terms||"",placeholder:"term_slug_1,term_slug_2",onChange:e=>$(t,"terms",e)}),p("div",{key:`tax-operator-wrapper-${t}`,style:{position:"relative"}},[p(o,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"operator",label:window.bricksData.i18n.compare,value:e.operator||"IN",options:L,onChange:e=>$(t,"operator",e)})]),p(o,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"include_children",label:window.bricksData.i18n.includeChildren,value:!1!==e.include_children,options:[{label:window.bricksData.i18n.true,value:!0},{label:window.bricksData.i18n.false,value:!1}],onChange:e=>$(t,"include_children",e)})])):[],p(r,{key:"add-tax-query",onClick:G,variant:"secondary",style:{marginTop:"12px",marginBottom:"16px"}},window.bricksData.i18n.addTaxonomyQuery)],p("div",{key:"infinite-scroll-separator",style:{borderTop:"1px solid #ddd",paddingTop:"16px",marginTop:"16px",marginBottom:"8px"}},[p("h4",{key:"infinite-scroll-title",style:{margin:"0 0 12px 0",fontSize:"14px",fontWeight:"600",color:"#1e1e1e"}},window.bricksData.i18n.infiniteScroll)]),p(i,{__nextHasNoMarginBottom:!0,key:"infinite_scroll",label:window.bricksData.i18n.infiniteScroll,checked:w.infinite_scroll||!1,onChange:e=>O("infinite_scroll",e)}),...w.infinite_scroll?[p(d||a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"infinite_scroll_margin",label:`${window.bricksData.i18n.infiniteScroll}: ${window.bricksData.i18n.offset}`,value:w.infinite_scroll_margin||"",placeholder:"0",type:"number",min:0,onChange:e=>O("infinite_scroll_margin",e?parseInt(e):"")})]:[],...w.infinite_scroll?[p(d||a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"infinite_scroll_delay",label:`${window.bricksData.i18n.infiniteScroll}: ${window.bricksData.i18n.delay} (ms)`,value:w.infinite_scroll_delay||"",placeholder:"0",type:"number",min:0,onChange:e=>O("infinite_scroll_delay",e?parseInt(e):"")})]:[],p("div",{key:"query-filters-separator",style:{borderTop:"1px solid #ddd",paddingTop:"16px",marginTop:"16px",marginBottom:"8px"}},[p("h4",{key:"query-filters-title",style:{margin:"0 0 12px 0",fontSize:"14px",fontWeight:"600",color:"#1e1e1e"}},window.bricksData.i18n.queryFilters)]),p(i,{__nextHasNoMarginBottom:!0,key:"disable_url_params",label:window.bricksData.i18n.disableUrlParamsFilter,checked:w.disable_url_params||!1,onChange:e=>O("disable_url_params",e),help:window.bricksData.i18n.disableUrlParamsFilterDesc}),p("div",{key:"live-search-separator",style:{borderTop:"1px solid #ddd",paddingTop:"16px",marginTop:"16px",marginBottom:"8px"}},[p("h4",{key:"live-search-title",style:{margin:"0 0 12px 0",fontSize:"14px",fontWeight:"600",color:"#1e1e1e"}},window.bricksData.i18n.liveSearch)]),p(i,{__nextHasNoMarginBottom:!0,key:"is_live_search",label:window.bricksData.i18n.liveSearch,checked:w.is_live_search||!1,onChange:e=>O("is_live_search",e),help:window.bricksData.i18n.enableLiveSearch}),...w.is_live_search&&!w.is_live_search_wrapper_selector?[p("div",{key:"live-search-info",style:{padding:"12px",backgroundColor:"#e7f3ff",border:"1px solid #72aee6",borderRadius:"4px",marginBottom:"12px"}},[p("p",{key:"info-text",style:{margin:0,fontSize:"13px",color:"#1e1e1e"}},window.bricksData.i18n.liveSearchInfo)])]:[],...w.is_live_search?[p(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"is_live_search_wrapper_selector",label:window.bricksData.i18n.liveSearchWrapperSelector,value:w.is_live_search_wrapper_selector||"",placeholder:"#brxe-a1b2c3",onChange:e=>O("is_live_search_wrapper_selector",e),help:window.bricksData.i18n.liveSearchWrapperSelectorDesc})]:[],p("div",{key:"ajax-loader-separator",style:{borderTop:"1px solid #ddd",paddingTop:"16px",marginTop:"16px",marginBottom:"8px"}},[p("h4",{key:"ajax-loader-title",style:{margin:"0 0 12px 0",fontSize:"14px",fontWeight:"600",color:"#1e1e1e"}},window.bricksData.i18n.ajaxLoader)]),p("div",{key:"ajax_loader_animation-wrapper",style:{position:"relative"}},[p(o,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"ajax_loader_animation",label:window.bricksData.i18n.ajaxLoaderAnimation,value:w.ajax_loader_animation||"",options:[{label:window.bricksData.i18n.none,value:""},...j],onChange:e=>O("ajax_loader_animation",e),help:window.bricksData.i18n.ajaxLoaderDesc})]),...w.ajax_loader_animation&&"none"!==w.ajax_loader_animation?[p("div",{key:"ajax-loader-color",style:{marginBottom:"12px"}},[p("label",{key:"color-label",style:{display:"block",marginBottom:"8px",fontSize:"11px",fontWeight:"500",textTransform:"uppercase"}},window.bricksData.i18n.color),p(c,{key:"color-picker",color:w.ajax_loader_color||"#000000",onChange:e=>O("ajax_loader_color",e),disableAlpha:!1})])]:[],...w.ajax_loader_animation&&"none"!==w.ajax_loader_animation&&""!==w.ajax_loader_animation?[p(d||a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"ajax_loader_scale",label:window.bricksData.i18n.scale,value:w.ajax_loader_scale||"",placeholder:"1",type:"number",min:.1,max:5,step:.1,onChange:e=>O("ajax_loader_scale",e?parseFloat(e):"")})]:[],...w.ajax_loader_animation&&"none"!==w.ajax_loader_animation&&""!==w.ajax_loader_animation?[p(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"ajax_loader_selector",label:window.bricksData.i18n.ajaxLoaderSelector,value:w.ajax_loader_selector||"",placeholder:"#brxe-a1b2c3",help:"CSS selector of the element to insert the AJAX loader into.",onChange:e=>O("ajax_loader_selector",e)})]:[],p("div",{key:"no-results-separator",style:{borderTop:"1px solid #ddd",paddingTop:"16px",marginTop:"16px",marginBottom:"8px"}},[p("h4",{key:"no-results-title",style:{margin:"0 0 12px 0",fontSize:"14px",fontWeight:"600",color:"#1e1e1e"}},window.bricksData.i18n.noResults)]),...w.no_results_text&&""!==w.no_results_text?[]:[window.createBricksSelectControl({id:"no_results_template",label:"Template",options:window.bricksGutenbergData?.sectionTemplates||{},multiple:!1,searchable:!0,placeholder:window.bricksData.i18n.selectTemplate},{attributes:{no_results_template:w.no_results_template||""},setAttributes:e=>{O("no_results_template",e.no_results_template)}})],...w.no_results_template&&""!==w.no_results_template?[]:[p(a,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,key:"no_results_text",label:window.bricksData.i18n.text,value:w.no_results_text||"",onChange:e=>O("no_results_text",e)})]])),y){const e=Object.keys(w).filter(e=>""!==w[e]&&void 0!==w[e]).slice(0,5).map(e=>`${e}: ${JSON.stringify(w[e])}`).join(", "),t=Object.keys(w).length>5?` (+${Object.keys(w).length-5} more)`:"";F.push(p("div",{key:"query-preview",style:{marginTop:"16px",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#f8f9fa"}},[p("div",{key:"preview-header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"}},[p("div",{key:"preview-info",style:{flex:1}},[p("div",{key:"preview",style:{fontSize:"12px",color:"#333",wordBreak:"break-word",lineHeight:"1.4"}},e+t||window.bricksData.i18n.defaultQuery)]),p(r,{key:"clear",onClick:U,variant:"secondary",size:"small",isDestructive:!0},window.bricksData.i18n.clearAll)])]))}return p(n,{key:e.id,label:e.label,help:e.help,__nextHasNoMarginBottom:!0},[p(l,{key:"query-panel"},F)])}catch(o){console.error("🔍 [Query Control] MAIN CATCH ERROR:",o),console.error("🔍 [Query Control] Error stack:",o.stack),console.error("🔍 [Query Control] Error details:",{propertyId:e?.id,propsAttributes:t?.attributes,error:o.message});const{createElement:a}=window.wp.element;return a("div",{style:{padding:"8px",border:"1px solid red",color:"red"}},window.bricksData.i18n.errorCouldNotLoadQuery)}}function createBricksClassControl(e,t){try{const o=window.bricksGutenbergData?.globalClassesNamesIds||[],a=e.options&&Array.isArray(e.options),i={...e,options:a?e.options.map(e=>{let t=e.label;if(!t||""===t.trim()){const a=Array.isArray(e.value)?e.value[0]:e.value,i=o.find(e=>e.id===a);t=i?i.name:a}return{value:e.id||e.value,label:t}}):o.map(e=>({value:e.id,label:e.name})),placeholder:e.placeholder||(e.multiple?window.bricksData.i18n.selectClasses:window.bricksData.i18n.selectClass)};return window.createBricksSelectControl(i,t)}catch(e){console.error("Class control error:",e);const{createElement:t}=window.wp.element;return t("div",{style:{padding:"8px",border:"1px solid red",color:"red"}},window.bricksData.i18n.errorCouldNotLoadClass)}}function validatePropertyValue(e,t){if(Array.isArray(e)){return["class","image-gallery"].includes(t)?e:["text","editor","textarea"].includes(t)?e.length>0?e.join(", "):"":e.length>0?e[0]:""}if("object"==typeof e&&null!==e){return["image","icon","link","query","image-gallery"].includes(t)?e:["text","editor","textarea"].includes(t)?e.url?e.url:e.name?e.name:e.label?e.label:JSON.stringify(e):""}return e}function createPropertyUpdater(e,t){return function(o,a){const i={...e.attributes.properties||{}};let n="text";if(t&&t.properties){const e=t.properties.find(e=>e.id===o);e&&(n=e.type)}if(null==a||""===a)delete i[o];else if(Array.isArray(a)&&0===a.length)delete i[o];else if("object"!=typeof a||Array.isArray(a)||0!==Object.keys(a).length){const e=validatePropertyValue(a,n);i[o]=e}else delete i[o];e.setAttributes({properties:i})}}function bricksCreatePropertyControl(e,t,o){try{const a=createPropertyUpdater(t,o),i={attributes:{[e.id]:(t.attributes.properties||{})[e.id]},setAttributes:function(t){const o=t[e.id];a(e.id,o)}};switch(e.type){case"text":default:return window.createBricksTextControl(e,i);case"editor":return window.createBricksRichTextControl(e,i);case"select":return window.createBricksSelectControl(e,i);case"toggle":return window.createBricksToggleControl(e,i);case"icon":return window.createBricksIconControl(e,i);case"image":return window.createBricksImageControl(e,i);case"image-gallery":return window.createBricksGalleryControl(e,i);case"link":return window.createBricksLinkControl(e,i);case"query":return window.createBricksQueryControl(e,i);case"class":return window.createBricksClassControl(e,i)}}catch(a){const i={attributes:{[e.id]:(t.attributes.properties||{})[e.id]},setAttributes:function(a){createPropertyUpdater(t,o)(e.id,a[e.id])}};return window.createBricksTextControl(e,i)}}function bricksRegisterComponentBlocks(){if(!window?.wp?.blocks||!window.bricksGutenbergData?.components)return;const{registerBlockType:e}=window.wp.blocks,{createElement:t}=window.wp.element,{Placeholder:o}=window.wp.components,a=window.wp.serverSideRender||window.wp.components.ServerSideRender;window.wp.blocks.setCategories([...window.wp.blocks.getCategories(),{slug:"bricks",title:`Bricks: ${window.bricksData.i18n.components}`}]);const i=window.bricksGutenbergData.enabledComponentIds||[];window.bricksGutenbergData.components.forEach(function(o){if(!o.id||!o.elements||!o.elements.length)return;if(!i.includes(o.id))return;const n=o.elements[0].label||window.bricksData.i18n.component+" "+o.id,r="bricks-components/"+o.id,l={componentId:{type:"string",default:o.id},properties:{type:"object",default:{}},blockId:{type:"string",default:""}};try{e(r,{title:n,category:"bricks",description:o.description,icon:t("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",style:{fill:"currentColor"}},t("path",{d:"M7.94514768,0 L8.35021097,0.253164557 L8.35021097,7.29113924 C9.77919139,6.34598684 11.3600476,5.87341772 13.092827,5.87341772 C15.5907298,5.87341772 17.6610326,6.74542025 19.3037975,8.48945148 C20.9240587,10.2334827 21.7341772,12.382547 21.7341772,14.9367089 C21.7341772,17.5021225 20.9184329,19.6511868 19.2869198,21.3839662 C17.6441549,23.1279975 15.579478,24 13.092827,24 C10.9212268,24 9.06470532,23.2236365 7.52320675,21.6708861 L7.52320675,23.5780591 L3,23.5780591 L3,0.556962025 L7.94514768,0 Z M12.2320675,10.4472574 C11.0393752,10.4472574 10.0436046,10.8523166 9.24472574,11.6624473 C8.44584692,12.4950815 8.0464135,13.5864911 8.0464135,14.9367089 C8.0464135,16.2869266 8.44584692,17.3727104 9.24472574,18.1940928 C10.0323527,19.0154753 11.0281234,19.4261603 12.2320675,19.4261603 C13.5035225,19.4261603 14.5330481,18.9985978 15.3206751,18.1434599 C16.0970503,17.2995738 16.4852321,16.2306675 16.4852321,14.9367089 C16.4852321,13.6427502 16.0914245,12.5682181 15.3037975,11.7130802 C14.5161705,10.8691941 13.4922707,10.4472574 12.2320675,10.4472574 Z"})),keywords:["bricks",window.bricksData.i18n.component],attributes:l,supports:{align:["wide","full"],customClassName:!1,html:!1,anchor:!1,className:!1},edit:function(e){try{const{InspectorControls:i}=window.wp.blockEditor||window.wp.editor,{PanelBody:n}=window.wp.components,{useEffect:l,useState:s,useRef:c,useMemo:d}=window.wp.element;l(()=>{!e.attributes.blockId&&e.clientId&&e.setAttributes({blockId:e.clientId})},[e.clientId,e.attributes.blockId]);const[p,u]=s(""),b=c(null),[w,y]=s(e.attributes);l(()=>{const t=setTimeout(()=>{y(e.attributes)},300);return()=>clearTimeout(t)},[JSON.stringify(e.attributes)]);const m=d(()=>{const e={componentId:w.componentId,blockId:w.blockId},t=w.properties||{};if(Object.keys(t).length>0){const o={};Object.keys(t).forEach(e=>{const a=t[e];null!=a&&""!==a&&(Array.isArray(a)?a.length>0&&(o[e]=a):"object"==typeof a?Object.keys(a).length>0&&(o[e]=a):o[e]=a)}),Object.keys(o).length>0&&(e.properties=o)}return e},[JSON.stringify(w)]),k=d(()=>p?t("div",{key:`cached-content-${p.slice(0,20).replace(/[^a-zA-Z0-9]/g,"")}`,"data-cached":"true",style:{opacity:.98},dangerouslySetInnerHTML:{__html:p}}):null,[p]);if(l(()=>{const e=setTimeout(()=>{if(b.current){const e=b.current.querySelector('[class*="wp-block"]:not([data-cached])')||b.current.querySelector("div > div:not([data-cached])");if(e){const t=e.outerHTML;t&&t.trim()&&t.length>50&&!t.includes(window.bricksData.i18n.loadingComponentPreview)&&!t.includes(window.bricksData.i18n.componentPreviewError)&&!t.includes("data-cached")&&t!==p&&u(t)}}},1500);return()=>clearTimeout(e)},[m]),l(()=>{const e=setTimeout(()=>{if(b.current&&!p){const e=b.current.querySelector('[class*="wp-block"]:not([data-cached])')||b.current.querySelector("div > div:not([data-cached])");if(e){const t=e.outerHTML;t&&t.trim()&&t.length>50&&!t.includes(window.bricksData.i18n.loadingComponentPreview)&&!t.includes(window.bricksData.i18n.componentPreviewError)&&!t.includes("data-cached")&&u(t)}}},2e3);return()=>clearTimeout(e)},[]),!a)return t("div",{style:{padding:"20px",border:"2px dashed #ccc",textAlign:"center"}},window.bricksData.i18n.serverSideRenderNotAvailable);let g=[];o.properties&&Array.isArray(o.properties)&&o.properties.forEach(function(t){if(t.id&&t.label){if(!t.connections||"object"!=typeof t.connections||0===Object.keys(t.connections).length)return;const a=bricksCreatePropertyControl(t,e,o);a&&g.push(a)}});const x=[];g.length>0&&i&&x.push(t(i,{key:"inspector"},t(n,{title:window.bricksData.i18n.properties,initialOpen:!0},g)));const h=d(()=>t(a,{key:"render",block:r,attributes:m,httpMethod:"POST",LoadingResponsePlaceholder:function(){return k||t("div",{style:{minHeight:"20px",opacity:.5}},window.bricksData.i18n.loadingComponentPreview)},ErrorResponsePlaceholder:function(){return t("div",{style:{padding:"20px",border:"2px dashed #e65100",textAlign:"center",color:"#e65100",backgroundColor:"#fff3e0"}},[t("p",{key:"error-title",style:{fontWeight:"bold",margin:"0 0 8px 0"}},window.bricksData.i18n.componentPreviewError),t("p",{key:"message",style:{margin:"0",fontSize:"12px"}},window.bricksData.i18n.componentConfiguredButPreview)])}}),[m,!!k]);try{x.push(t("div",{key:"render-wrapper",ref:b},h))}catch(e){console.error("ServerSideRender Error:",e),console.error("Block Name:",r),console.error("Safe Attributes:",m),x.push(t("div",{key:"render-error",style:{padding:"20px",border:"2px solid #d32f2f",textAlign:"center",color:"#d32f2f",backgroundColor:"#ffebee"}},[t("div",{key:"render-error-title"},window.bricksData.i18n.componentPreviewUnavailable),t("div",{key:"details",style:{fontSize:"12px",marginTop:"8px"}},e.message)]))}return x}catch(a){return console.error("Bricks Gutenberg Block Error:",a),console.error("Component ID:",o.id),console.error("Props:",e),t("div",{style:{padding:"20px",border:"2px dashed #ccc",textAlign:"center",color:"#666"}},[t("div",{key:"block-error-title"},window.bricksData.i18n.errorRenderingComponent),t("div",{key:"details",style:{fontSize:"12px",marginTop:"8px"}},a.message)])}},save:function(){return null}})}catch(e){console.error("Error registering block:",r,e)}}),window.bricksGutenbergData.components.forEach(function(a){if(a.id&&a.elements&&a.elements.length&&!i.includes(a.id)){const i="bricks-components/"+a.id,n=a.elements[0].label||`${window.bricksData.i18n.component} ${a.id}`;e(i,{title:n,category:"bricks",icon:t("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",style:{fill:"currentColor",opacity:.5}},t("path",{d:"M7.94514768,0 L8.35021097,0.253164557 L8.35021097,7.29113924 C9.77919139,6.34598684 11.3600476,5.87341772 13.092827,5.87341772 C15.5907298,5.87341772 17.6610326,6.74542025 19.3037975,8.48945148 C20.9240587,10.2334827 21.7341772,12.382547 21.7341772,14.9367089 C21.7341772,17.5021225 20.9184329,19.6511868 19.2869198,21.3839662 C17.6441549,23.1279975 15.579478,24 13.092827,24 C10.9212268,24 9.06470532,23.2236365 7.52320675,21.6708861 L7.52320675,23.5780591 L3,23.5780591 L3,0.556962025 L7.94514768,0 Z M12.2320675,10.4472574 C11.0393752,10.4472574 10.0436046,10.8523166 9.24472574,11.6624473 C8.44584692,12.4950815 8.0464135,13.5864911 8.0464135,14.9367089 C8.0464135,16.2869266 8.44584692,17.3727104 9.24472574,18.1940928 C10.0323527,19.0154753 11.0281234,19.4261603 12.2320675,19.4261603 C13.5035225,19.4261603 14.5330481,18.9985978 15.3206751,18.1434599 C16.0970503,17.2995738 16.4852321,16.2306675 16.4852321,14.9367089 C16.4852321,13.6427502 16.0914245,12.5682181 15.3037975,11.7130802 C14.5161705,10.8691941 13.4922707,10.4472574 12.2320675,10.4472574 Z"})),keywords:["bricks",window.bricksData.i18n.component],attributes:{componentId:{type:"string",default:a.id},properties:{type:"object",default:{}}},supports:{customClassName:!1,html:!1,anchor:!1,className:!1,inserter:!1},edit:function(){return t(o,{icon:"warning",label:`${window.bricksData.i18n.blockNotAvailable}: ${n} [BRICKS]`,instructions:window.bricksData.i18n.componentNotEnabledInstructions,className:"bricks-disabled-component-placeholder"})},save:function(){return null}})}})}window.createBricksRichTextControl=createBricksRichTextControl,window.createBricksIconControl=createBricksIconControl,window.createBricksImageControl=createBricksImageControl,window.createBricksGalleryControl=createBricksGalleryControl,window.createBricksLinkControl=createBricksLinkControl,window.createBricksQueryControl=createBricksQueryControl,window.bricksRegisterComponentBlocks=bricksRegisterComponentBlocks,document.addEventListener("DOMContentLoaded",function(){bricksRegisterComponentBlocks()});
